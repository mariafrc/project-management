<div class="container p-mt-4">
  <p-card>
    <h1 align="center" class="p-m-0">
      {{ project ? project.title : "Chargement..." }}
    </h1>
  </p-card>
  <button
    pButton
    icon="pi pi-arrow-left"
    iconPos="left"
    label="retour"
    class="p-mt-2 p-mb-5"
    routerLink="/app/projects"
  ></button>

  <div *ngIf="project">
    <p-accordion>
      <p-accordionTab header="Filtrer">
        <div class="p-fluid p-formgrid p-grid p-jc-center">
          <div class="p-field p-col-12 p-md-5">
            <input
              type="text"
              placeholder="Titre"
              pInputText
              [(ngModel)]="filter.title"
            />
          </div>

          <div class="p-field p-col-12 p-md-5">
            <p-dropdown
              [options]="status"
              [(ngModel)]="filter.status"
            ></p-dropdown>
          </div>

          <div class="p-col-12 p-md-2" *ngIf="filter.title || filter.status">
            <button
              pButton
              icon="pi pi-times"
              class="p-ml-2 p-button-danger"
              (click)="onResetFilter()"
            ></button>
          </div>
        </div>
      </p-accordionTab>
    </p-accordion>

    <p-card>
      <div align="center">
        <button
          pButton
          class="p-button-rounded"
          icon="pi pi-plus"
          (click)="onAdd()"
        ></button>
      </div>
      <hr />

      <div class="task-item" *ngFor="let task of tasks">
        <h3 class="title">{{ task.title }} : {{ task.status | taskstatus }}</h3>
        <div>
          <button
            pButton
            icon="pi pi-pencil"
            class="p-mr-1"
            (click)="onEdit(task)"
          ></button>
          <button
            pButton
            icon="pi pi-minus"
            class="p-button-danger"
            (click)="onDelete(task.id)"
          ></button>
        </div>
      </div>

      <div *ngIf="!tasks.length">
        <h2 align="center">Aucune Tâche Trouvée</h2>
      </div>
    </p-card>
  </div>
</div>
